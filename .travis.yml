language: python

python:
  - "3.7"

before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
  - sudo apt-get update -y
  - sudo apt-get install -y python-pytest
  - sudo pip install codecov
  - sudo apt install python3-pip
  - pip install setuptools

install:
  - sudo apt install software-properties-common
  - sudo apt install gcc-7 g++-7 gcc-8 g++-8 gcc-9 g++-9
  # - sudo apt-get install -qq gcc-4.8 g++-4.8
  
  #- sudo apt-get -r requirements.txt 
  - pip install coverage
  - pip install pytest-cov==2.11.1 

script:
  
  #- (cd src && CC=gcc-4.8 CXX=g++-4.8 make -f Makefile-custom test)
  - cd RobocupWrapper 
  - pip3 install -e.
  - CC=g++-7 python setup001.py install
  #- python3 setup001.py build_ext --inplace
  #- python setup001.py test
  - python -m pytest test.py # run tests
  - pytest test.py --cov=.

###############################################################3

#   before_install:
#     - pip install -U pytest ##done
#     - pip install codecov
#   install:
#     - pip install -r requirements.txt 
#     - pip install coverage
#     - pip install pytest-cov==2.11.1 

#   script: 
  
#     - cd RobocupWrapper 
#     - pip3 install -e.
#     - python3 setup001.py build_ext --inplace
#     - python -m pytest test.py # run tests
#     - py.test test.py --cov=.


#   after_success:
#     #- codecov 
#     - bash <(curl -s https://codecov.io/bash)

